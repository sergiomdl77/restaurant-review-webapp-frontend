<div class="container" id="restaurantListContainer">
    <div class="row bootstrap snippets bootdeys"> 
        <div class="col-md-9 col-sm-7" style="margin: 2rem"> 
            <h2>Reviewed Restaurants</h2> 
        </div> 
    </div>

    <!-- Restaurant Entry -->
    <div class="member-entry" *ngFor="let restaurant of restaurants" > 
        <a href="#" class="member-img"> 
            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="img-rounded"> 
            <i class="fa fa-forward"></i> 
        </a> 

        <div class="search-result-item-body">
            <div class="row">
                <div class="col-sm-9">
                    <h4 class="search-result-item-heading"><a href="#"> {{restaurant.name}} </a></h4>
                    <p class="info"> {{restaurant.locCity}}, {{restaurant.locState}} {{restaurant.locZipCode}} </p>
                    <p class="info"> {{restaurant.foodType}} </p>
                    <p class="info"> {{restaurant.ambiance}} </p>
                </div>
                <div class="col-sm-3 text-align-center">
                    <p>
                        <span style="margin:2px" *ngFor="let star of countArray(restaurant.priceLevel)">
                           <img src="/assets/img/currency_dollar_green.png" height="22" width="22"> 
                        </span>
                    </p>
                    <p>
                        <span style="margin:2px" *ngFor="let star of countArray(restaurant.avgScore)">
                            <img src="/assets/img/star-fill.svg">
                        </span>
                    </p>
                    <p style="margin-top:15px">
                        <a (click)="onOpenModal(restaurant, 'reviewList')" class="btn btn-primary btn-info btn-sm" style="color:white;" >Reviews</a>
                    </p>
                    <p style="margin-top:15px">
                        <a (click)="onOpenModal(restaurant, 'addReview')" class="btn btn-primary btn-info btn-sm" style="color:white;">Add Review</a>
                    </p>

                </div>
            </div>
        </div>    
    </div>
</div>

<!-- Modal to List all reviews for one specific restaurant -->
<div class="modal fade" id="reviewsOnRestaurantModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel"> {{ restaurantOfInterest.name }}'s Reviews</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
            <span aria-hidden="true">&times;</span>
        </div>
        <div class="modal-body">
          
            <div class="member-entry" *ngFor="let review of reviewsOnRestaurant" > 
                <a href="#" class="member-img"> 
                    <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="img-rounded"> 
                    <i class="fa fa-forward"></i> 
                </a> 
        
                <div class="search-result-item-body">
                    <div class="row">
                        <div class="col-sm-9">
                            <h4 class="search-result-item-heading"><a href="#"> {{review.memberId}} </a></h4>
                            <p class="info"> {{ getMemberLocation(review.memberId) }} </p>
                            <!-- <p class="info"> Posted on: {{review.rvDate | date:'medium' | slice:0:12 }} </p> -->
                            <p class="info"> Posted on: {{ review.rvDate  }} </p>
                            <p class="info"> "{{ review.comment }}" </p>
                            <p>
                                <span style="margin:2px" *ngFor="let star of countArray(review.score)">
                                    <img src="/assets/img/star-fill.svg">
                                </span>
                            </p>
                        </div>
                    </div>
                </div>    
            </div>

        </div>
        <div class="modal-footer">
            <button type="button" id="add-employee-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>
    
<!-- Modal to Add a review for a specific restaurant  -->
<div id="addReviewModal" class="modal show" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="text-center">Add Review on {{ restaurantOfInterest.name }}</h3>
            <button  type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
  
        </div>
        <div class="modal-body">
            <form class="form col-md-12 center-block" #addReviewForm="ngForm" id="addReviewForm"  >
              <div class="form-group">
                <input type="text" class="form-control input-lg" ngModel name="comment" id="comment"
                    placeholder="Your comment" required>
              </div>
              <div class="form-group">
                <input type="text" class="form-control input-lg" ngModel name="grade" id="grade"
                    placeholder="Number of stars awarded" required>
              </div>
              <div class="form-group">
                <button (click)="onAddReview(addReviewForm)" data-dismiss="modal" class="btn btn-info btn-lg btn-block" 
                    type="submit" >Submit Review</button>
              </div>
            </form>
        </div>
        <div class="modal-footer">
            <div class="col-md-1accordion2">
            <button id="closeButton2" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
            </div>	
        </div>
    </div>
  </div>
</div>
